#!/usr/bin/env bash
set -e

# Project-local virtualenv location
VENV=".venv"

if [ ! -d "$VENV" ]; then
  echo "→ Creating virtual environment with uv"
  uv venv "$VENV"

  if [ -f "pyproject.toml" ]; then
    uv sync
  elif [ -f "requirements.txt" ]; then
    uv pip install -r requirements.txt
  else
    echo "⚠ No pyproject.toml or requirements.txt found"
  fi
fi

# Activate venv
source "$VENV/bin/activate"
